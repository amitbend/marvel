## mako

<%page expression_filter="h" args="online_help_token"/>

<%namespace name='static' file='../static_content.html'/>
<%namespace file='../main.html' import="login_query"/>
<%!
from django.core.urlresolvers import reverse
from django.utils.translation import ugettext as _

from lms.djangoapps.ccx.overrides import get_current_ccx
from openedx.core.djangolib.markup import HTML, Text

# App that handles subdomain specific branding
from branding import api as branding_api
# app that handles site status messages
from status.status import get_site_status_msg
from openedx.core.djangoapps.lang_pref.api import header_language_selector_is_enabled, released_languages
%>

## Provide a hook for themes to inject branding on top.
<%block name="navigation_top" />

## Add UI Toolkit components if using the Pattern Library
% if uses_pattern_library:
    <%block name="js_extra">
    <%static:require_module module_name="js/header_factory" class_name="HeaderFactory">
    HeaderFactory();
    </%static:require_module>
    </%block>
% endif

<%block>
<%
try:
    course_id = course.id
except:
    # can't figure out a better way to get at a possibly-defined course var
    course_id = None
site_status_msg = get_site_status_msg(course_id)
%>
% if site_status_msg:
<div class="site-status">
  <div class="inner-wrapper">
    <span class="icon fa fa-warning"></span>
    <p>${site_status_msg}</p>
  </div>
</div>
% endif
</%block>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">
        <span class="theme-nav-wrapper_logo-holder theme-nav-wrapper_logo-holder_small">
            <img src="${static.url("images/home/LogoMadrasaConv1.png")}" alt="logo" />
        </span>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link theme-main-nav_link" href="#">אודות <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link theme-main-nav_link" href="#">לומדים ביחד</a>
        </li>
        <li class="nav-item">
          <a class="nav-link theme-main-nav_link" href="#">תומכים ושותפים</a>
        </li>
        <li class="nav-item">
            <a class="nav-link theme-main-nav_link" href="#">שירותי שפה</a>
          </li>
      </ul>
      <a class="theme-btn theme-btn-warning btn-warning my-2 my-sm-0" type="submit">הצטרפו למהפכה</a>

    </div>
  </nav>
<div class="nav-holder">
% if uses_bootstrap:
  <header class="navigation-container header-global">
    <nav class="navbar navbar-toggleable-md navbar-light">
      <button class="navbar-toggler navbar-toggler-right mt-2" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <%include file="bootstrap/navbar-logo-header.html" args="online_help_token=online_help_token"/>
      % if user.is_authenticated():
        <%include file="bootstrap/navbar-authenticated.html" args="online_help_token=online_help_token"/>
      % else:
        <%include file="bootstrap/navbar-not-authenticated.html" args="online_help_token=online_help_token"/>
      % endif
    </nav>
  </header>
% else:

  <header id="global-navigation" class="theme-header header-global" >
    <!-- <div class="theme-header-info">
      <div class="theme-header-info_contact">
          <a class="theme-header-info_mail" href="mailto:admin@madrasafree.com"><i class="fa fa-envelope" aria-hidden="true"></i>admin@madrasafree.com</a>
      </div>
        <div class="theme-header-info_social">
            <span class="theme-header-info_text">מצאו אותנו בפייסבוק!</span>
          <ul class="social-list">
              <li class="social-list_item social-list_item__first"><a class="social-list_link theme-header-info_mail" href="mailto:admin@madrasafree.com"><i class="fa fa-envelope" aria-hidden="true"></i></a></li>
              <li class="social-list_item"><a class="social-list_link" href="https://www.facebook.com/madrasafree" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
          </ul>
        </div>
    </div> -->
    <div class="theme-nav-wrapper">
      <%include file="navbar-logo-header.html" args="online_help_token=online_help_token"/>
      % if user.is_authenticated():
        <%include file="navbar-authenticated.html" args="online_help_token=online_help_token"/>
      % else:
        <%include file="navbar-not-authenticated.html" args="online_help_token=online_help_token"/>
      % endif
      % if header_language_selector_is_enabled():
        <% languages = released_languages() %>
        % if len(languages) > 1:
          <ol class="user">
            <li class="primary">
              <form action="/i18n/setlang/" method="post" class="settings-language-form" id="language-settings-form">
                <input type="hidden" id="csrf_token" name="csrfmiddlewaretoken" value="${csrf_token}">
                % if user.is_authenticated():
                  <input title="preference api" type="hidden" class="url-endpoint" value="${reverse('preferences_api', kwargs={'username': user.username})}" data-user-is-authenticated="true">
                % else:
                  <input title="session update url" type="hidden" class="url-endpoint" value="${reverse('session_language')}" data-user-is-authenticated="false">
                % endif
                <label><span class="sr">${_("Choose Language")}</span>
                  <select class="input select language-selector" id="settings-language-value" name="language">
                    % for language in languages:
                      % if language[0] == LANGUAGE_CODE:
                        <option value="${language[0]}" selected="selected">${language[1]}</option>
                      % else:
                        <option value="${language[0]}" >${language[1]}</option>
                      % endif
                    % endfor
                  </select>
                </label>
              </form>
            </li>
          </ol>
        % endif
      % endif
    </div>
  </header>
    <div class="theme-main-nav">
      <div class="theme-main-nav_opener"></div>
      <div class="theme-main-nav_logo">
        <a href="${marketing_link('ROOT')}">
          <span class="theme-nav-wrapper_logo-holder theme-nav-wrapper_logo-holder_small">
              <img src="${static.url("images/home/LogoMadrasaConv1.png")}" alt="logo" />
          </span>
        </a>
      </div>
      <nav class="theme-main-nav_holder">
        <ul class="theme-main-nav_list">
            <li class="theme-main-nav_item"><a href="/" class="theme-main-nav_link">          <span class="theme-nav-wrapper_logo-holder theme-nav-wrapper_logo-holder_small">
                <img src="/static/${settings.FEATURES.get('MARVEL_BLUE_DEFAULT_SITE_THEME', settings.DEFAULT_SITE_THEME)}/images/home/LogoMadrasaConv1.png" alt="logo" />
            </span></a></li>
            <li class="theme-main-nav_item"><a href="/courses" class="theme-main-nav_link">קורסים</a></li>
            <li class="theme-main-nav_item"><a href="/community" class="theme-main-nav_link">קהילה</a></li>
            <li class="theme-main-nav_item"><a href="/about" class="theme-main-nav_link">על מדרסה</a></li>
            <li class="theme-main-nav_item"><a href="/supporters" class="theme-main-nav_link">תומכים</a></li>
            <li class="theme-main-nav_item"><a href="/supportus" class="theme-main-nav_link">תמכו בנו</a></li>
            <li class="theme-main-nav_item"><a href="/contact" class="theme-main-nav_link">צרו קשר</a></li>

            % if user.is_authenticated():
              <%block name="navigation_global_links_authenticated">
                % if settings.FEATURES.get('COURSES_ARE_BROWSABLE') and not show_program_listing:
                  <li class="theme-main-nav_item">
                    <a class="theme-main-nav_link" href="${marketing_link('COURSES')}">${_('Explore Courses')}</a>
                  </li>
                % endif
                % if show_program_listing:
                  <li class="theme-main-nav_item">
                    <a class="${'active ' if reverse('dashboard') == request.path else ''}theme-main-nav_link" href="${reverse('dashboard')}">
                      ${_("Courses")}
                    </a>
                  </li>
                  <li class="theme-main-nav_item">
                    <a class="${'active ' if reverse('program_listing_view') in request.path else ''}theme-main-nav_link" href="${reverse('program_listing_view')}">
                      ${_("Programs")}
                    </a>
                  </li>
                % endif
                %if settings.FEATURES.get('ENABLE_SYSADMIN_DASHBOARD','') and user.is_staff:
                  <li class="theme-main-nav_item">
                    ## Translators: This is short for "System administration".
                    <a class="theme-main-nav_link" href="${reverse('sysadmin')}">${_("Sysadmin")}</a>
                  </li>
                %endif
              </%block>
            % else:
              <%block name="navigation_other_global_links">
                % if not settings.FEATURES['DISABLE_LOGIN_BUTTON']:
                  % if settings.FEATURES.get('ENABLE_COURSE_DISCOVERY'):
                    <li class="theme-main-nav_item">
                      <a class="theme-main-nav_link" href="/courses">${_("Explore Courses")}</a>
                    </li>
                  %endif
                % endif
              </%block>
            %endif
        </ul>
    </nav>
  </div>
</div>
<script>
  $(".theme-main-nav_opener").on("click", function open(){
    if ($(this).parent().hasClass("theme-main-nav__open")){
      $(this).parent().removeClass("theme-main-nav__open");
    } else {
      $(this).parent().addClass("theme-main-nav__open");
    }
  });
</script>
% endif
% if course:
<!--[if lte IE 9]>
<div class="ie-banner" aria-hidden="true">${Text(_('{begin_strong}Warning:{end_strong} Your browser is not fully supported. We strongly recommend using {chrome_link} or {ff_link}.')).format(
    begin_strong=HTML('<strong>'),
    end_strong=HTML('</strong>'),
    chrome_link=HTML('<a href="https://www.google.com/chrome" target="_blank">Chrome</a>'),
    ff_link=HTML('<a href="http://www.mozilla.org/firefox" target="_blank">Firefox</a>'),
)}</div>
<![endif]-->
% endif

<%include file="../help_modal.html"/>
